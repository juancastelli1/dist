(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28c50f58"],{4022:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Reportes",attrs:{id:"reporte"}},[a("h1",[t._v("Bienvenido Administrador!")]),a("h4",{staticStyle:{"text-align":"center"}},[t._v("Elige que reporte deseas generar:")]),t._m(0),a("div",{staticClass:"module-border-wrap"},[a("div",{staticClass:"module"},[a("div",{staticStyle:{width:"30%",display:"inline-block",padding:"1em",border:"1px solid black","border-radius":"1em"}},[a("b-form-group",{attrs:{label:"*Reparto","label-for":"id_reparto"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[a("v-autocomplete",{attrs:{id:"id_reparto",type:"text",placeholder:"Ingrese un Reparto","invalid-feedback":"Complete este campo",required:"",solo:"",filled:"",items:t.op_repartos},on:{change:function(e){return t.cambiarrepausado(t.idrepaus)}},model:{value:t.idrepaus,callback:function(e){t.idrepaus=e},expression:"idrepaus"}})],1),a("button",{staticClass:"button-64",attrs:{id:"botonpollo",role:"button"},on:{click:function(e){return t.elegirtipo("Pollo")}}},[a("span",{staticClass:"text"},[t._v(" Pollo")])]),a("button",{staticClass:"button-64",attrs:{id:"botonconge",role:"button"},on:{click:function(e){return t.elegirtipo("Congelados")}}},[a("span",{staticClass:"text"},[t._v("Conge")])]),a("button",{staticClass:"button-64",attrs:{id:"botonambos",role:"button"},on:{click:function(e){return t.elegirtipo("Ambos")}}},[a("span",{staticClass:"text"},[t._v("Ambos")])]),a("b-form-group",{staticStyle:{display:"inline-block",width:"50%"},attrs:{label:"Fecha Inicial","label-for":"fechainiusada"}},[a("b-form-input",{attrs:{id:"fechainiusada",type:"date",placeholder:"Ingrese la fecha en la que quiere el reporte","invalid-feedback":"Complete este campo",required:""},on:{change:function(e){return t.fechausadacambio()}},model:{value:t.fechainiusada,callback:function(e){t.fechainiusada=e},expression:"fechainiusada"}})],1),a("b-form-group",{staticStyle:{display:"inline-block",width:"50%"},attrs:{label:"Fecha Final","label-for":"fechafinusada"}},[a("b-form-input",{attrs:{id:"fechafinusada",gma:"",type:"date",placeholder:"Ingrese la fecha en la que quiere el reporte","invalid-feedback":"Complete este campo",required:""},on:{change:function(e){return t.fechausadacambio()}},model:{value:t.fechafinusada,callback:function(e){t.fechafinusada=e},expression:"fechafinusada"}})],1)],1),a("div",{staticStyle:{width:"30%",display:"inline-block","vertical-align":"top","text-align":"center"}},[a("p",{staticStyle:{"margin-top":"-1em","margin-bottom":"-1em"}},[t._v("Suma de Ventas")]),a("div",{staticStyle:{border:"1px solid black","text-align":"center",padding:"1em","border-radius":"1em",margin:"1em"}},[a("b",[t._v("$"+t._s(t.sumadeventas))])]),a("p",{staticStyle:{"margin-top":"-1em","margin-bottom":"-1em"}},[t._v("Total Cobrado")]),a("div",{staticStyle:{border:"1px solid black","text-align":"center",padding:"1em","border-radius":"1em",margin:"1em"}},[a("b",[t._v("$"+t._s(t.totalcobrado))])])]),a("div",{staticStyle:{width:"10%",display:"inline-block","vertical-align":"top"}},[a("p",{staticStyle:{"margin-top":"-1em","margin-bottom":"-1em","vertical-align":"top","text-align":"center"}},[t._v("Efectivo")]),a("div",{staticStyle:{border:"1px solid black","text-align":"center",padding:"1em","border-radius":"1em",margin:"1em"}},[a("b",[t._v("$"+t._s(t.totalEfectivo))])]),a("p",{staticStyle:{"margin-top":"-1em","margin-bottom":"-1em","vertical-align":"top","text-align":"center"}},[t._v("Merc Pago")]),a("div",{staticStyle:{border:"1px solid black","text-align":"center",padding:"1em","border-radius":"1em",margin:"1em"}},[a("b",[t._v("$"+t._s(t.totalMercadoPago))])])]),t._m(1),a("b-modal",{ref:"modal-pdf",attrs:{"no-close-on-backdrop":"",size:"xl",id:"modal-pdf","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("h5",{staticClass:"modal-title"},[t._v("Vista Previa")])]},proxy:!0}])},[a("reporte-listadopdf",{attrs:{PDFventa:t.ordenAPDF}})],1),a("script",{tag:"component",attrs:{src:"https://code.jquery.com/jquery-1.12.3.min.js",async:""}}),a("script",{tag:"component",attrs:{src:"https://cdnjs.cloudflare.com/ajax/libs/jspdf/0.9.0rc1/jspdf.min.js",async:""}}),a("script",{tag:"component",attrs:{src:"https://cdn.jsdelivr.net/npm/chart.js@2.9.4",async:""}}),a("div",{staticStyle:{width:"30%",display:"inline-block","margin-right":"2em","vertical-align":"top"}},[a("b-table",{ref:"tablaregistros",attrs:{fields:t.fields,striped:"",sortable:"",responsive:"","no-border-collapse":!1,hover:"",items:t.tabla_clientes,"show-empty":"","per-page":t.perPage,"current-page":t.currentPage,id:"tablaregistros"},scopedSlots:t._u([{key:"empty",fn:function(){return[a("b",[t._v("No hay registros para mostrar")])]},proxy:!0},{key:"cell(selected)",fn:function(e){var r=e.rowSelected;return[r?[a("span",{attrs:{"aria-hidden":"true"}},[t._v("✓")]),a("span",{staticClass:"sr-only"},[t._v("Selected")])]:[a("span",{attrs:{"aria-hidden":"true"}},[t._v(" ")]),a("span",{staticClass:"sr-only"},[t._v("Not selected")])]]}},{key:"cell(numero_cliente)",fn:function(e){return[a("b",[t._v(t._s(e.value))])]}},{key:"cell(nombre)",fn:function(e){return[t._v(" "+t._s(e.value.toUpperCase())+" ")]}},{key:"cell(saldototal)",fn:function(e){return[t._v(" "+t._s(e.item.cliente.saldopollo+e.item.cliente.saldocongelados)+" ")]}},{key:"cell(id_reparto)",fn:function(e){return[t._v(" "+t._s(e.value.split("/")[4])+" ")]}},{key:"cell(visitado)",fn:function(e){return[e.item.tabla_ventas.length>0?a("div",[a("svg",{staticClass:"bi bi-check-circle-fill",staticStyle:{color:"green"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"}})]),t._v(" SI ")]):a("div",[a("svg",{staticClass:"bi bi-x-circle-fill",staticStyle:{color:"red"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"}})]),t._v(" NO ")])]}},{key:"cell(provincia)",fn:function(e){return[t._v(" "+t._s(e.value.toUpperCase())+" ")]}}])})],1),a("div",{staticStyle:{width:"60%",display:"inline-block","vertical-align":"top","text-align":"center","margin-top":"-9em"}},[a("b-table",{ref:"tablaregistros2",attrs:{fields:t.fieldsstock,stacked:"",sortable:"",responsive:"",hover:"","show-empty":"",items:t.tabla_stocks,"sticky-header":!1,"no-border-collapse":!1,"per-page":t.perPage,"current-page":t.currentPage,id:"tablaregistros2",selectable:"","select-mode":"multi","empty-text":"No hay ningún stock definido para este reparto en las fechas","empty-filtered-text":"No hemos encontrado registros que coincidan con lo que está buscando"},on:{"row-selected":t.seleccionar_una},scopedSlots:t._u([{key:"cell(selected)",fn:function(e){var r=e.rowSelected;return[r?[a("span",{attrs:{"aria-hidden":"true"}},[t._v("✓")]),a("span",{staticClass:"sr-only"},[t._v("Selected")])]:[a("span",{attrs:{"aria-hidden":"true"}},[t._v(" ")]),a("span",{staticClass:"sr-only"},[t._v("Not selected")])]]}},{key:"cell(id_reparto)",fn:function(e){return[t._v(" "+t._s(e.value.split("/")[4])+" ")]}},{key:"cell(componentes)",fn:function(e){return[e.value.length>0?a("b-card",{staticStyle:{width:"100%"},attrs:{title:"Productos: "}},[a("b-list-group",{staticStyle:{width:"100%"},attrs:{vertical:""}},t._l(e.value,(function(e){return a("div",{key:e.id},[a("b",[t._v("Producto:")]),t._v(" "+t._s(t.productos.find((function(t){return t.id_producto==e.producto.split("/")[4]})).nombre)+" - "),a("b",[t._v("Cant.: ")]),t._v(" "+t._s(2==e.tipo?"$":"")+t._s(e.cantidad)+" "),a("br"),a("br")])})),0)],1):a("b-list-group-item",[t._v(" Sin Productos ")])]}},{key:"cell(cerrado)",fn:function(e){return[!0===e.value?a("div",[a("svg",{staticClass:"bi bi-check-circle-fill",staticStyle:{color:"green"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"}})]),t._v(" SI ")]):a("div",[a("svg",{staticClass:"bi bi-x-circle-fill",staticStyle:{color:"red"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"}})]),t._v(" NO ")])]}},{key:"row-details",fn:function(e){return[a("b-card",[a("b-list-group",{attrs:{horizontal:""}},[a("b-list-group",[a("b-list-group-item",[a("b",[t._v("Nombre del Stock:")]),t._v(" "+t._s(e.item.nombre)+" ")]),e.item.componentes.length>0?a("b-card",{attrs:{title:"Productos: "}},[a("b-list-group",{attrs:{horizontal:""}},t._l(e.item.componentes,(function(e){return a("div",{key:e.id},[a("b-list-group",[a("b-list-group-item",[a("b",[t._v("Producto:")]),t._v(" "+t._s(t.productos.find((function(t){return t.id_producto==e.producto.split("/")[4]})).nombre)+" ")]),a("b-list-group-item",[a("p",[a("b",[t._v("Cantidad: ")]),t._v(" "+t._s(2==e.tipo?"$":"")+t._s(e.cantidad)+" ")])])],1)],1)})),0)],1):a("b-list-group-item",[t._v(" Sin Productos ")])],1),t._v("   ")],1)],1)]}}])})],1)],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"center","min-width":"100%"}},[a("a",{staticClass:"bn39",attrs:{href:"/reportesrepartoscli"}},[a("span",{staticClass:"bn39span"},[t._v("Repartos")])]),a("a",{staticClass:"bn39",attrs:{href:"/reportesclientes"}},[a("span",{staticClass:"bn39span"},[t._v("Clientes")])]),a("a",{staticClass:"bn39",attrs:{href:"/reportesventas"}},[a("span",{staticClass:"bn39span"},[t._v("Ventas")])]),a("a",{staticClass:"bn39",attrs:{href:"/reportesproductos"}},[a("span",{staticClass:"bn39span"},[t._v("Productos")])]),a("a",{staticClass:"bn39",attrs:{href:"/reporteliquidacion"}},[a("span",{staticClass:"bn39span"},[t._v("Liquidacion")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"30%",display:"inline-block","vertical-align":"top","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","text-align":"center","vertical-align":"top"}},[a("canvas",{staticStyle:{"text-align":"center",display:"inline-block"},attrs:{id:"chart2",width:"150",height:"150"}})]),a("div",{staticStyle:{display:"inline-block","text-align":"center","vertical-align":"top"}},[a("canvas",{staticStyle:{"text-align":"center",display:"inline-block"},attrs:{id:"chart",width:"150",height:"150"}})])])}],o=a("1da1"),s=a("ade3"),i=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("4de4"),a("caad"),a("2532"),a("159b"),a("ac1f"),a("1276"),a("7db0"),a("fb6a"),a("5319"),a("6480"),a("bc3a"),a("6ada"),a("8baf"),a("aa47"),a("d67e")),c=a.n(i),l=a("d549"),d=(a("f7e2"),a("c03a")),u=(a("e4a4"),new URL("http://93.188.162.174:8081"));u.pathname="clientes";var p={name:"HelloWorld",data:function(){var t;return t={repartoslista:[],reparto:{},chart:null,tabla_stocks:[],chart2:null,chart3:null,datarep:[],listacli:[],hex:[],tabla_clientes:[],idrepaus:0,lista_id:[],tipoelegido:"Ambos",repartousado:{repa:{},lista_id:[],tabla_clientes:[]},productos:[],ventasepicas:[]},Object(s["a"])(t,"chart",null),Object(s["a"])(t,"chart2",null),Object(s["a"])(t,"datachart",{labels:["Pollo","Congelados"],datasets:[]}),Object(s["a"])(t,"datachart2",{labels:[],datasets:[]}),Object(s["a"])(t,"stocks",[]),Object(s["a"])(t,"fields",[{key:"cliente.numero_cliente",label:"N° Cliente",sortable:!0},{key:"cliente.nombre",label:"Nombre/s",sortable:!0},{key:"saldototal",label:"Saldo Actual",sortable:!0},{key:"visitado",label:"Visitado",sortable:!0}]),Object(s["a"])(t,"fieldsstock",[{key:"id_stock",label:"ID",sortable:!0},{key:"nombre",label:"Nombre",sortable:!0},{key:"fechastock",label:"Fecha",sortable:!0},{key:"id_reparto",label:"ID Reparto",sortable:!0},{key:"cerrado",label:"Stock Cerrado",sortable:!0},{key:"componentes",label:"",sortable:!0}]),Object(s["a"])(t,"totalRows",1),Object(s["a"])(t,"currentPage",1),Object(s["a"])(t,"perPage",10),Object(s["a"])(t,"buscar",""),Object(s["a"])(t,"op_repartos",[]),Object(s["a"])(t,"fechainiusada",null),Object(s["a"])(t,"fechafinusada",null),Object(s["a"])(t,"sortableOptions",{chosenClass:"is-selected"}),Object(s["a"])(t,"token",""),Object(s["a"])(t,"infoVisitar",{id:"modal_visitar",cliente:-1}),Object(s["a"])(t,"totalEfectivo",0),Object(s["a"])(t,"totalMercadoPago",0),Object(s["a"])(t,"sumadeventas",0),Object(s["a"])(t,"totalcobrado",0),Object(s["a"])(t,"ordenAPDF",{}),t},computed:{rows:function(){return this.tabla_ventas.length},id:function(){return this.tabla_ventas.numero_orden},items:function(){var t=this;return tabla_ordenes.filter((function(e){return e.numero_orden.toLowerCase().includes(t.buscar.toLowerCase())}))}},methods:{suma:function(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].totalpagado+t[a].totalpagadomp;return e},costos:function(t){var e=0;return t.forEach((function(t){e+=t.costototal})),e},ganancia:function(t){var e=0;return t.forEach((function(t){e+=t.ganancia})),e},cantidad:function(t){var e=0;return t.forEach((function(t){t.componentes.forEach((function(t){e+=t.cantidad}))})),e},saldos:function(t){var e=0;return t.forEach((function(t){e-=t.diferencia})),Math.abs(e)},fechausadacambio:function(){-1!=this.idrepaus?(this.testFetch(),this.testFetch3(),this.testFetch5()):this.testFetch2()},cambiarrepausado:function(t){-1!=this.idrepaus?(this.repartousado.repa=this.getReparto(t),this.testFetch(),this.testFetch3(),this.testFetch5()):(this.repartousado.repa=null,this.testFetch2())},rowClass:function(t,e){return t&&"row"===e?t.cliente.saldopollo+t.cliente.saldocongelados>this.getLimite(t.cliente.categoria.split("/")[4]).limite?"table-warning":void 0:"table-danger"},checkeartipo:function(){"Pollo"==this.tipoelegido?(document.getElementById("botonpollo").className="button-642",document.getElementById("botonconge").className="button-64",document.getElementById("botonambos").className="button-64"):"Ambos"==this.tipoelegido?(document.getElementById("botonpollo").className="button-64",document.getElementById("botonconge").className="button-64",document.getElementById("botonambos").className="button-642"):(document.getElementById("botonpollo").className="button-64",document.getElementById("botonconge").className="button-642",document.getElementById("botonambos").className="button-64")},iconos:function(t){var e=this,a="",r=0,n=0,o=0;return this.repartousado.tabla_clientes.forEach((function(t){e.saldos(t.tabla_ventas)>r&&(r=e.saldos(t.tabla_ventas)),e.suma(t.tabla_ventas)>n&&(n=e.suma(t.tabla_ventas)),e.ganancia(t.tabla_ventas)>o&&(o=e.ganancia(t.tabla_ventas))})),this.ganancia(t.tabla_ventas)==o&&(a+=" ＄ "),this.suma(t.tabla_ventas)==n&&(a+=" ★ "),this.saldos(t.tabla_ventas)==r&&(a+=" ✗ "),a},testFetch5:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t.tabla_stocks=[],a=t.repartousado.repa.id_reparto,t.stocks.forEach((function(e){e.id_reparto.split("/")[4]==a&&t.checkearfecha(e.fechastock)&&t.tabla_stocks.push(e)}))}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})))()},getLimite:function(t){var e=this.listacat.find((function(e){return e.id_categoria==t}));return e},getStocks:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new d["a"],a.apiUrl.pathname="stocks/",e.next=4,a.getData();case 4:t.stocks=e.sent;case 5:case"end":return e.stop()}}),e)})))()},getCategorias:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new d["a"],a.apiUrl.pathname="categorias/",e.next=4,a.getData();case 4:t.listacat=e.sent;case 5:case"end":return e.stop()}}),e)})))()},testFetch3:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,s,i,c,l,d,p,h,b,g,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(u);case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,r.results.length,t.datachart.datasets=[],t.datachart2.datasets=[],n=0,o=0,s=0,i=0,c=0,l=0,0,0,d=0,p=0,t.datachart2.labels=[],h={label:"Ganancia por Reparto",data:[],backgroundColor:["rgb(255, 205, 86)","rgb(137, 30, 53)"],hoverOffset:4},b={label:"Ventas por Reparto",data:[],backgroundColor:["rgb(0, 0, 0)","rgb(255, 165, 0)","rgb(137, 30, 53)"],hoverOffset:4},g=t.repartousado.repa,t.datachart2.labels.push("reparto "+g.id_reparto),f={id_reparto:-1,lista_id:[],tabla_ventas:[]},f.id_reparto=g.id_reparto,t.ventasepicas.forEach((function(e){e.fecharealizacion.split("-")[2],e.fecharealizacion.split("-")[1],e.fecharealizacion.split("-")[0];t.checkearfecha(e.fecharealizacion)&&e.id_reparto.split("/")[4]==g.id_reparto&&(f.tabla_ventas.push(e),"Pollo"==e.tipo_venta?(n+=e.totalpagado,s+=e.totalpagadomp,c+=e.gananciatotal,d++):(o+=e.totalpagado,i+=e.totalpagadomp,l+=e.gananciatotal,p++))})),e.t0=t.tipoelegido,e.next="Ambos"===e.t0?31:"Pollo"===e.t0?36:"Congelados"===e.t0?41:46;break;case 31:return t.totalEfectivo=n+o,t.totalMercadoPago=s+i,t.sumadeventas=c+l,t.totalcobrado=t.totalEfectivo+t.totalMercadoPago,e.abrupt("break",46);case 36:return t.totalEfectivo=n,t.totalMercadoPago=s,t.sumadeventas=c,t.totalcobrado=t.totalEfectivo+t.totalMercadoPago,e.abrupt("break",46);case 41:return t.totalEfectivo=o,t.totalMercadoPago=i,t.sumadeventas=l,t.totalcobrado=t.totalEfectivo+t.totalMercadoPago,e.abrupt("break",46);case 46:b.data.push(t.ganancia(f.tabla_ventas)),h.data.push(d),h.data.push(p),t.datachart.datasets.push(h),t.datachart2.datasets.push(b),t.repartoslista.push(f),console.log("opcion completa"),console.log(f),t.setGraph(),e.next=60;break;case 57:e.prev=57,e.t1=e["catch"](0),console.log(e.t1);case 60:case"end":return e.stop()}}),e,null,[[0,57]])})))()},testFetch4:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(u);case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,r.results.length,t.datachart.datasets=[],t.datachart.labels=[],t.datachart2.datasets=[],t.datachart2.labels=[],n={label:"Ganancia por Reparto",data:[],backgroundColor:["rgb(276, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(0, 0, 0)","rgb(255, 165, 0)","rgb(137, 30, 53)"],hoverOffset:4},o={label:"Ventas por Reparto",data:[],backgroundColor:["rgb(0, 0, 0)","rgb(255, 165, 0)","rgb(137, 30, 53)"],hoverOffset:4},t.datarep.forEach((function(e){t.datachart2.labels.push("reparto "+e.id_reparto);var a={id_reparto:-1,lista_id:[],tabla_ventas:[]};a.id_reparto=e.id_reparto;for(var s=0;s<t.ventasepicas.lenght;s++)t.ventasepicas[s].fecharealizacion==t.fechausada&&(console.log(t.ventasepicas[s]),t.ventasepicas[s].id_reparto.split("/")[4]==e.id_reparto&&a.tabla_ventas.push(r.results[s]));n.data.push(t.ganancia(a.tabla_ventas)),o.data.push(a.tabla_ventas.length),t.datachart.datasets.push(n),t.datachart2.datasets.push(o),t.repartoslista.push(a),console.log("opcion completa"),console.log(a)})),t.setGraph(),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()},testFetch:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.tabla_clientes=[],e.next=4,fetch(u);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,0,0,0,r.results.length,n=t.repartousado.repa,o=[],n.clientes_reparto.forEach((function(t){return o.push(parseInt(t.split("/")[4]))})),t.listacli.forEach((function(e){var a={cliente:e,tabla_ventas:[]};t.ventasepicas.forEach((function(r){r.fecharealizacion.split("-")[2],r.fecharealizacion.split("-")[1],r.fecharealizacion.split("-")[0];t.checkearfecha(r.fecharealizacion)&&(console.log("hola"),r.id_reparto.split("/")[4]==n.id_reparto&&r.id_cliente.split("/")[4]==e.numero_cliente&&(r.totalpagadomp,r.totalpagado,r.diferencia,a.tabla_ventas.push(r)))})),o.includes(e.numero_cliente)&&t.tabla_clientes.push(a)})),console.log(t.tabla_clientes),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))()},testFetch2:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,s,i,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.repartoslista=[],e.next=4,fetch(u);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,n=0,o=0,s=0,r.results.length,t.datachart.datasets=[],t.datachart2.datasets=[],t.datachart3.datasets=[],t.datachart.labels=[],i={label:"Ventas por Reparto",data:[],backgroundColor:["rgb(276, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(0, 0, 0)","rgb(255, 165, 0)","rgb(137, 30, 53)"],hoverOffset:4},c={label:"Pagos de Clientes",data:[],backgroundColor:["rgb(0, 0, 0)","rgb(255, 165, 0)","rgb(137, 30, 53)"],hoverOffset:4},l={label:"Pagos de Clientes",data:[],backgroundColor:["rgb(102, 229, 42)","rgb(137, 30, 53)"],hoverOffset:4},t.datarep.forEach((function(e){var a={repa:null,lista_id:[],tabla_clientes:[]};a.repa=e,a.repa.clientes_reparto.forEach((function(t){return a.lista_id.push(parseInt(t.split("/")[4]))})),t.listacli.forEach((function(e){var r={cliente:e,tabla_ventas:[]};a.lista_id.includes(e.numero_cliente)&&(t.ventasepicas.forEach((function(i){i.fecharealizacion.split("-")[2],i.fecharealizacion.split("-")[1],i.fecharealizacion.split("-")[0];t.checkearfecha(i.fecharealizacion)&&(console.log("hola"),i.id_reparto.split("/")[4]==a.repa.id_reparto&&i.id_cliente.split("/")[4]==e.numero_cliente&&(n+=i.totalpagadomp,o+=i.totalpagado,s-=i.diferencia,r.tabla_ventas.push(i)))})),lista_id.includes(e.numero_cliente)&&t.tabla_clientes.push(r),i.data.push(t.suma(r.tabla_ventas)),t.datachart.datasets.push(i),console.log("opcion completa"),console.log(a))})),t.repartoslista.push(a)})),c.data.push(n),c.data.push(o),l.data.push(n+o),l.data.push(s),t.datachart2.datasets.push(c),t.datachart3.datasets.push(l),console.log(t.repartoslista),console.log(t.repartousado.tabla_clientes),e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](0),console.log(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})))()},checkearfecha:function(t){var e=new Date(this.fechainiusada),a=new Date(this.fechafinusada),r=new Date(t);if(r.getTime()<=a.getTime()&&r.getTime()>=e.getTime())return!0},getRepartos:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new d["a"],a.apiUrl.pathname="repartos/",e.next=4,a.getData();case 4:t.datarep=e.sent,t.datarep.forEach((function(e){r={},r.value=e.id_reparto,r.text=e.nombre,console.log(r),t.op_repartos.push(r)}));case 6:case"end":return e.stop()}}),e)})))()},getVentas:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new d["a"],a.apiUrl.pathname="ventas/",e.next=4,a.getData();case 4:t.ventasepicas=e.sent;case 5:case"end":return e.stop()}}),e)})))()},getProductos:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new d["a"],a.apiUrl.pathname="productos/",e.next=4,a.getData();case 4:t.productos=e.sent;case 5:case"end":return e.stop()}}),e)})))()},getClientes:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new d["a"],a.apiUrl.pathname="clientes/",e.next=4,a.getData();case 4:t.listacli=e.sent,t.checkeartipo();case 6:case"end":return e.stop()}}),e)})))()},setGraph:function(){console.log("Datasets"),console.log(this.datachart),console.log(this.datachart2);var t=document.getElementById("chart");this.chart&&this.chart.destroy(),this.chart=new l["a"](t,{type:"pie",data:this.datachart,options:{title:{text:"Tipo de Ventas",display:!0}}});var e=document.getElementById("chart2");this.chart2&&this.chart2.destroy(),this.chart2=new l["a"](e,{type:"pie",data:this.datachart2,options:{title:{text:"Cantidad de ventas por Reparto",display:!0}}})},showModal:function(){this.$refs["my-modal"].show()},showModalinfo:function(t,e){this.infoVisitar.cliente=t,this.showModal()},hideModal:function(){this.$refs["my-modal"].hide()},fechaactual:function(){var t=new Date;console.log(t.toLocaleDateString());var e=function(t){return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+t.getFullYear()};return console.log(e(t)),e(t)},fechaactual2:function(){var t=new Date,e=function(t){return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)};return console.log(e(t)),e(t)},buscarnow:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,s,i,c,l,d,u,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=t.$refs.buscadorlista,r=a.value.toUpperCase(),n=document.getElementById("tablaregistros"),o=n.getElementsByTagName("tr"),i=1;i<o.length;i++)s=o[i].getElementsByTagName("td"),l=s[0].textContent||s[0].innerText,d=s[1].textContent||s[1].innerText,u=s[3].textContent||s[3].innerText,p=s[4].textContent||s[4].innerText,h=s[6].textContent||s[6].innerText,c=l+d+u+p+h,c.toUpperCase().indexOf(r)>-1?o[i].style.display="":o[i].style.display="none";case 5:case"end":return e.stop()}}),e)})))()},getReparto:function(t){var e=this.datarep.find((function(e){return e.id_reparto==t}));return e},inicializar:function(){"reparto"==this.$session.get("tipocuenta")&&(console.log(this.$session.get("repartused")),this.reparto=this.$session.get("repartused")),this.fechainiusada=this.fechaactual2(),this.fechafinusada=this.fechaactual2()},generarPDF:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=document.getElementById("graficos"),c()().set({margin:1,filename:"Graficos.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:3,letterRendering:!0},jsPDF:{unit:"in",format:"a4",orientation:"landscape"}}).from(e).save().catch((function(t){return console.log(t)})),a=document.getElementById("tabla"),c()().set({margin:1,filename:"Tabla.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:3,letterRendering:!0},jsPDF:{unit:"in",format:"a3",orientation:"landscape"}}).from(a).save().catch((function(t){return console.log(t)}));case 4:case"end":return t.stop()}}),t)})))()},elegirtipo:function(t){this.tipoelegido=t,this.checkeartipo(),this.testFetch3()},redirect:function(){this.$session.exists()||window.location.replace("/login"),"administrador"!=this.$session.get("tipocuenta")&&window.location.replace("/")}},beforeMount:function(){this.getVentas(),this.getStocks(),this.getClientes(),this.getProductos(),this.getRepartos(),this.getCategorias(),this.inicializar(),this.redirect()}},h=p,b=(a("40c7"),a("2877")),g=Object(b["a"])(h,r,n,!1,null,"741c44fa",null);e["default"]=g.exports},"40c7":function(t,e,a){"use strict";a("6531")},6531:function(t,e,a){},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),s=o("map");r({target:"Array",proto:!0,forced:!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-28c50f58.8c467051.js.map